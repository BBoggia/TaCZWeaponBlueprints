#
#
# I USED THIS TO REBALANCE THE DAMAGE ARMOR IGNORE AND EFFECTIVE RANGE OF THE GUNS
# THE STATS WERE ORIGINALLY GIVEN FROM O1 AND WERE MANUALLY REBALANCED TO BE BETWEEN 10 and 500
#
#


a = {
  'emxarms:1045x103': {'damage': 34.67, 'armor_ignore': 0.9, 'effectiveRange': 500, 'recoilPitch': 15, 'recoilYaw': 6, 'inaccuracy': 1, 'bulletDropRate': 0.005, 'bulletDropDelta': 0.001},
  'emxarms:1045x103belt': {'damage': 34.67, 'armor_ignore': 0.9, 'effectiveRange': 500, 'recoilPitch': 15, 'recoilYaw': 6, 'inaccuracy': 1.5, 'bulletDropRate': 0.005, 'bulletDropDelta': 0.001},
  'classicr:416barrett': {'damage': 28.39, 'armor_ignore': 0.7, 'effectiveRange': 450, 'recoilPitch': 9, 'recoilYaw': 3.5, 'inaccuracy': 1.5, 'bulletDropRate': 0.008, 'bulletDropDelta': 0.0016},
  'tacz:50bmg': {'damage': 30.57, 'armor_ignore': 0.75, 'effectiveRange': 438, 'recoilPitch': 10, 'recoilYaw': 4, 'inaccuracy': 2, 'bulletDropRate': 0.012, 'bulletDropDelta': 0.0024},
  'tacz:338': {'damage': 18.09, 'armor_ignore': 0.6, 'effectiveRange': 412, 'recoilPitch': 8, 'recoilYaw': 3, 'inaccuracy': 2, 'bulletDropRate': 0.01, 'bulletDropDelta': 0.002},
  'emxarms:339x57': {'damage': 18.47, 'armor_ignore': 0.6, 'effectiveRange': 325, 'recoilPitch': 8, 'recoilYaw': 3, 'inaccuracy': 2, 'bulletDropRate': 0.011, 'bulletDropDelta': 0.0022},
  'emxarms:339x57fmj': {'damage': 18.97, 'armor_ignore': 0.65, 'effectiveRange': 325, 'recoilPitch': 8, 'recoilYaw': 3, 'inaccuracy': 1.8, 'bulletDropRate': 0.011, 'bulletDropDelta': 0.0022},
  'oldgun:30x06': {'damage': 12.09, 'armor_ignore': 0.45, 'effectiveRange': 290, 'recoilPitch': 7.5, 'recoilYaw': 3, 'inaccuracy': 3, 'bulletDropRate': 0.014, 'bulletDropDelta': 0.0028},
  'tacz:30_06': {'damage': 12.09, 'armor_ignore': 0.45, 'effectiveRange': 290, 'recoilPitch': 7.5, 'recoilYaw': 3, 'inaccuracy': 3, 'bulletDropRate': 0.014, 'bulletDropDelta': 0.0028},
  'lradd:m993': {'damage': 11.96, 'armor_ignore': 0.6, 'effectiveRange': 260, 'recoilPitch': 7, 'recoilYaw': 3, 'inaccuracy': 3, 'bulletDropRate': 0.015, 'bulletDropDelta': 0.003},
  'oldgun:75x54': {'damage': 11.08, 'armor_ignore': 0.45, 'effectiveRange': 260, 'recoilPitch': 6.8, 'recoilYaw': 3, 'inaccuracy': 4, 'bulletDropRate': 0.015, 'bulletDropDelta': 0.003},
  'oldgun:792x57': {'damage': 11.9, 'armor_ignore': 0.45, 'effectiveRange': 260, 'recoilPitch': 7, 'recoilYaw': 3, 'inaccuracy': 4, 'bulletDropRate': 0.016, 'bulletDropDelta': 0.0032},
  'tacz:308': {'damage': 11.93, 'armor_ignore': 0.45, 'effectiveRange': 260, 'recoilPitch': 7, 'recoilYaw': 3, 'inaccuracy': 3, 'bulletDropRate': 0.015, 'bulletDropDelta': 0.003},
  'tacz:68x51fury': {'damage': 12.45, 'armor_ignore': 0.5, 'effectiveRange': 260, 'recoilPitch': 6, 'recoilYaw': 2.5, 'inaccuracy': 3, 'bulletDropRate': 0.02, 'bulletDropDelta': 0.004},
  'tacz:762x54': {'damage': 12.14, 'armor_ignore': 0.45, 'effectiveRange': 260, 'recoilPitch': 7, 'recoilYaw': 3.2, 'inaccuracy': 4, 'bulletDropRate': 0.015, 'bulletDropDelta': 0.003},
  'oldgun:303': {'damage': 11.57, 'armor_ignore': 0.4, 'effectiveRange': 235, 'recoilPitch': 6.5, 'recoilYaw': 2.8, 'inaccuracy': 4, 'bulletDropRate': 0.017, 'bulletDropDelta': 0.0034},
  'tacz:58x42': {'damage': 9.2, 'armor_ignore': 0.35, 'effectiveRange': 235, 'recoilPitch': 4, 'recoilYaw': 1.8, 'inaccuracy': 4, 'bulletDropRate': 0.025, 'bulletDropDelta': 0.005},
  'oldgun:65x50': {'damage': 10.56, 'armor_ignore': 0.35, 'effectiveRange': 215, 'recoilPitch': 5.5, 'recoilYaw': 2.5, 'inaccuracy': 3, 'bulletDropRate': 0.014, 'bulletDropDelta': 0.0028},
  'cib:545x39': {'damage': 8.54, 'armor_ignore': 0.3, 'effectiveRange': 200, 'recoilPitch': 3.5, 'recoilYaw': 2, 'inaccuracy': 5, 'bulletDropRate': 0.025, 'bulletDropDelta': 0.005},
  'tacz:556x45': {'damage': 9.01, 'armor_ignore': 0.35, 'effectiveRange': 200, 'recoilPitch': 3, 'recoilYaw': 1.5, 'inaccuracy': 4, 'bulletDropRate': 0.02, 'bulletDropDelta': 0.004},
  'atea:1163x39': {'damage': 11.7, 'armor_ignore': 0.4, 'effectiveRange': 175, 'recoilPitch': 6, 'recoilYaw': 2.5, 'inaccuracy': 5, 'bulletDropRate': 0.035, 'bulletDropDelta': 0.007},
  'oldgun:792x33': {'damage': 9.59, 'armor_ignore': 0.3, 'effectiveRange': 175, 'recoilPitch': 4, 'recoilYaw': 2, 'inaccuracy': 5, 'bulletDropRate': 0.03, 'bulletDropDelta': 0.006},
  'classicr:300blk': {'damage': 9.67, 'armor_ignore': 0.3, 'effectiveRange': 155, 'recoilPitch': 4.5, 'recoilYaw': 2, 'inaccuracy': 5, 'bulletDropRate': 0.04, 'bulletDropDelta': 0.008},
  'classicr:762x39copper': {'damage': 9.8, 'armor_ignore': 0.3, 'effectiveRange': 155, 'recoilPitch': 5, 'recoilYaw': 2.5, 'inaccuracy': 5, 'bulletDropRate': 0.034, 'bulletDropDelta': 0.0068},
  'tacz:762x39': {'damage': 9.46, 'armor_ignore': 0.25, 'effectiveRange': 155, 'recoilPitch': 5, 'recoilYaw': 2.5, 'inaccuracy': 6, 'bulletDropRate': 0.035, 'bulletDropDelta': 0.007},
  'cib:9x39mm': {'damage': 7.66, 'armor_ignore': 0.45, 'effectiveRange': 140, 'recoilPitch': 4, 'recoilYaw': 2, 'inaccuracy': 6, 'bulletDropRate': 0.06, 'bulletDropDelta': 0.012},
  'classicr:57x28': {'damage': 5.23, 'armor_ignore': 0.4, 'effectiveRange': 140, 'recoilPitch': 2, 'recoilYaw': 1, 'inaccuracy': 3, 'bulletDropRate': 0.03, 'bulletDropDelta': 0.006},
  'emxarms:402x31': {'damage': 5.05, 'armor_ignore': 0.2, 'effectiveRange': 140, 'recoilPitch': 2.5, 'recoilYaw': 1.5, 'inaccuracy': 4, 'bulletDropRate': 0.025, 'bulletDropDelta': 0.005},
  'emxarms:402x31fmj': {'damage': 5.02, 'armor_ignore': 0.25, 'effectiveRange': 140, 'recoilPitch': 2.5, 'recoilYaw': 1.5, 'inaccuracy': 3.5, 'bulletDropRate': 0.025, 'bulletDropDelta': 0.005},
  'emxarms:402x31rip': {'damage': 5.19, 'armor_ignore': 0.15, 'effectiveRange': 120, 'recoilPitch': 2.3, 'recoilYaw': 1.5, 'inaccuracy': 5, 'bulletDropRate': 0.03, 'bulletDropDelta': 0.006},
  'tacz:50ae': {'damage': 10.39, 'armor_ignore': 0.2, 'effectiveRange': 80, 'recoilPitch': 6, 'recoilYaw': 3, 'inaccuracy': 8, 'bulletDropRate': 0.07, 'bulletDropDelta': 0.014},
  'tacz:762x25': {'damage': 5.34, 'armor_ignore': 0.35, 'effectiveRange': 80, 'recoilPitch': 2.5, 'recoilYaw': 1.2, 'inaccuracy': 4, 'bulletDropRate': 0.035, 'bulletDropDelta': 0.007},
  'emxarms:x16sg': {'damage': 16.31, 'armor_ignore': 0.35, 'effectiveRange': 70, 'recoilPitch': 7, 'recoilYaw': 2, 'inaccuracy': 6, 'bulletDropRate': 0.06, 'bulletDropDelta': 0.015},
  'tacz:357mag': {'damage': 7.71, 'armor_ignore': 0.25, 'effectiveRange': 70, 'recoilPitch': 4, 'recoilYaw': 2, 'inaccuracy': 7, 'bulletDropRate': 0.04, 'bulletDropDelta': 0.008},
  'emxarms:410x57ap': {'damage': 7.87, 'armor_ignore': 0.3, 'effectiveRange': 50, 'recoilPitch': 4.5, 'recoilYaw': 1.5, 'inaccuracy': 8, 'bulletDropRate': 0.045, 'bulletDropDelta': 0.009},
  'lradd:arrow': {'damage': 6.63, 'armor_ignore': 0.1, 'effectiveRange': 50, 'recoilPitch': 0, 'recoilYaw': 0, 'inaccuracy': 5, 'bulletDropRate': 0.06, 'bulletDropDelta': 0.012},
  'tacz:46x30': {'damage': 5.13, 'armor_ignore': 0.15, 'effectiveRange': 50, 'recoilPitch': 1.8, 'recoilYaw': 1, 'inaccuracy': 3, 'bulletDropRate': 0.03, 'bulletDropDelta': 0.006},
  'tacz:9mm': {'damage': 4.93, 'armor_ignore': 0.15, 'effectiveRange': 50, 'recoilPitch': 2, 'recoilYaw': 1, 'inaccuracy': 5, 'bulletDropRate': 0.05, 'bulletDropDelta': 0.01},
  'lradd:flintlock_bullet': {'damage': 5.57, 'armor_ignore': 0.15, 'effectiveRange': 40, 'recoilPitch': 3, 'recoilYaw': 1.5, 'inaccuracy': 8, 'bulletDropRate': 0.05, 'bulletDropDelta': 0.01},
  'tacz:45acp': {'damage': 5.27, 'armor_ignore': 0.1, 'effectiveRange': 40, 'recoilPitch': 3, 'recoilYaw': 1.5, 'inaccuracy': 6, 'bulletDropRate': 0.06, 'bulletDropDelta': 0.012},
  'tacz:12g': {'damage': 11.21, 'armor_ignore': 0.15, 'effectiveRange': 35, 'recoilPitch': 6, 'recoilYaw': 2, 'inaccuracy': 10, 'bulletDropRate': 0.09, 'bulletDropDelta': 0.017},
  'emxarms:x16he': {'damage': 11.21, 'armor_ignore': 0.2, 'effectiveRange': 30, 'recoilPitch': 6.5, 'recoilYaw': 2.5, 'inaccuracy': 12, 'bulletDropRate': 0.1, 'bulletDropDelta': 0.02},
  'lradd:nail': {'damage': 3.24, 'armor_ignore': 0.5, 'effectiveRange': 12, 'recoilPitch': 1, 'recoilYaw': 0.5, 'inaccuracy': 10, 'bulletDropRate': 0.08, 'bulletDropDelta': 0.016}
}


def getScale(key, data, newMax, newMin):
    oldMax = data[max(data, key=lambda x: data[x][key])][key]
    oldMin = data[min(data, key=lambda x: data[x][key])][key]
    if oldMax == oldMin:
        return 0  # Avoid division by zero
    scale = (newMax - newMin) / (oldMax - oldMin)
    return scale

import copy

# Keep a copy of the original data
original_a = copy.deepcopy(a)

def getScale(key, data, newMax, newMin):
    oldMax = data[max(data, key=lambda x: data[x][key])][key]
    oldMin = data[min(data, key=lambda x: data[x][key])][key]
    if oldMax == oldMin:
        return 0  # Avoid division by zero
    scale = (newMax - newMin) / (oldMax - oldMin)
    return scale

##################### NOTHING BETWEEN 350 AND 500

b = {i: original_a[i] for i in original_a if original_a[i]['effectiveRange'] >= 200}

minB = min(b.values(), key=lambda x: x['effectiveRange'])['effectiveRange']
newMin = 225
newMax = 375
scale = getScale('effectiveRange', b, newMax, newMin)

for i in b:
    a[i]['effectiveRange'] = (original_a[i]['effectiveRange'] - minB) * scale + newMin

#####################

b = {i: original_a[i] for i in original_a if original_a[i]['effectiveRange'] >= 100}

minB = min(b.values(), key=lambda x: x['effectiveRange'])['effectiveRange']
newMin = 100
newMax = 225
scale = getScale('effectiveRange', b, newMax, newMin)

for i in b:
    a[i]['effectiveRange'] = (original_a[i]['effectiveRange'] - minB) * scale + newMin
    

#####################

b = {i: original_a[i] for i in original_a if original_a[i]['effectiveRange'] >= 40}

minB = min(b.values(), key=lambda x: x['effectiveRange'])['effectiveRange']
newMin = 30
newMax = 140
scale = getScale('effectiveRange', b, newMax, newMin)

for i in b:
    a[i]['effectiveRange'] = (original_a[i]['effectiveRange'] - minB) * scale + newMin

#####################

b = {i: original_a[i] for i in original_a}

minB = min(b.values(), key=lambda x: x['effectiveRange'])['effectiveRange']
newMin = 10
newMax = 80
scale = getScale('effectiveRange', b, newMax, newMin)

for i in b:
    a[i]['effectiveRange'] = round((original_a[i]['effectiveRange'] - minB) * scale + newMin, 3)

# Output the adjusted values
print(sorted(a.items(), key=lambda x: x[1]['effectiveRange'], reverse=True))


# ##################### NOTHING BETWEEN 350 AND 500

# b = {i : a[i] for i in a if a[i]['effectiveRange'] >= 200}
        
# minB = b[min(b, key=lambda x: b[x]['effectiveRange'])]['effectiveRange']

# newMin = 200
# newMax = 650

# for i in b:
#     a[i]['effectiveRange'] = (a[i]['effectiveRange'] - minB) * getScale('effectiveRange', b, newMax, newMin) + newMin
    

# #####################

# b = {i : a[i] for i in a if a[i]['effectiveRange'] >= 100}
        
# minB = b[min(b, key=lambda x: b[x]['effectiveRange'])]['effectiveRange']

# newMin = 100
# newMax = 225

# for i in b:
#     a[i]['effectiveRange'] = (a[i]['effectiveRange'] - minB) * getScale('effectiveRange', b, newMax, newMin) + newMin
    
    
# #####################

# b = {i : a[i] for i in a if a[i]['effectiveRange'] >= 0}
        
# minB = b[min(b, key=lambda x: b[x]['effectiveRange'])]['effectiveRange']

# newMin = 10
# newMax = 140

# for i in b:
#     a[i]['effectiveRange'] = round((a[i]['effectiveRange'] - minB) * getScale('effectiveRange', b, newMax, newMin) + newMin, 3)


# print(sorted(a.items(), key=lambda x: x[1]['effectiveRange'], reverse=True))